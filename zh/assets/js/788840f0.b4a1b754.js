(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[9238],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return l},kt:function(){return d}});var r=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,c=e.parentName,l=a(e,["components","mdxType","originalType","parentName"]),h=u(n),d=s,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||i;return n?r.createElement(m,o(o({ref:t},l),{},{components:n})):r.createElement(m,o({ref:t},l))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,o=new Array(i);o[0]=h;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a.mdxType="string"==typeof e?e:s,o[1]=a;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},10033:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return a},toc:function(){return c},default:function(){return l}});var r=n(22122),s=n(19756),i=(n(67294),n(3905)),o={title:"CUE \u7ec4\u4ef6"},a={unversionedId:"end-user/components/cue",id:"end-user/components/cue",isDocsHomePage:!1,title:"CUE \u7ec4\u4ef6",description:"\u26a0\ufe0f \u8bf7\u5b89\u88c5 KubeVela CLI \u547d\u4ee4\u884c\u5de5\u5177",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/end-user/components/cue.md",sourceDirName:"end-user/components",slug:"/end-user/components/cue",permalink:"/zh/docs/next/end-user/components/cue",editUrl:"https://github.com/oam-dev/kubevela/edit/master/docs/zh/end-user/components/cue.md",version:"current",lastUpdatedBy:"Wei (\u6bb5\u5c11)",lastUpdatedAt:1629470948,formattedLastUpdatedAt:"2021/8/20",frontMatter:{title:"CUE \u7ec4\u4ef6"}},c=[{value:"\u9644\u5f55\uff1aWeb Service \u914d\u7f6e\u9879",id:"\u9644\u5f55\uff1aweb-service-\u914d\u7f6e\u9879",children:[]}],u={toc:c};function l(e){var t=e.components,n=(0,s.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f \u8bf7\u5b89\u88c5 ",(0,i.kt)("a",{parentName:"p",href:"/zh/docs/next/getting-started/quick-install##3"},"KubeVela CLI \u547d\u4ee4\u884c\u5de5\u5177"))),(0,i.kt)("p",null,"\u4f5c\u4e3a\u7528\u6237\u7684\u4f60\uff0c\u4e00\u5b9a\u5e0c\u671b\u968f\u65f6\u53ef\u4ee5\u627e\u5230\u5f00\u7bb1\u5373\u7528\u7684\u7ec4\u4ef6\uff0c\u540c\u65f6\u5982\u679c\u6ca1\u6709\u627e\u5230\u6ee1\u8db3\u9700\u6c42\u7684\u7ec4\u4ef6\uff0c\u53c8\u53ef\u4ee5\u7075\u6d3b\u5730\u81ea\u5b9a\u4e49\u4f60\u60f3\u8981\u7684\u7ec4\u4ef6\u3002"),(0,i.kt)("p",null,"KubeVela \u901a\u8fc7\u5f3a\u5927\u7684 CUE \u914d\u7f6e\u8bed\u8a00\u53bb\u7c98\u5408\u5f00\u6e90\u793e\u533a\u91cc\u7684\u6240\u6709\u76f8\u5173\u80fd\u529b\u3002\u6211\u4eec\u7ed9\u4f60\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5f00\u7bb1\u5373\u7528\u7684\u7ec4\u4ef6\u80fd\u529b\uff0c\u4e5f\u4e3a\u4f60\u4eec\u7684\u5e73\u53f0\u7ba1\u7406\u5458\uff0c\u5f00\u653e\u4e86\u7075\u6d3b\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5f00\u53d1\u65b9\u5f0f\u3002"),(0,i.kt)("p",null,"\u53ef\u4ee5\u5148\u4f7f vela CLI \u770b\u770b\u6211\u4eec\u5df2\u7ecf\u901a\u8fc7 CUE \u9ed8\u8ba4\u5185\u7f6e\u7684\u7ec4\u4ef6\u80fd\u529b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ vela components\nNAME        NAMESPACE   WORKLOAD                                DESCRIPTION                                                         \nraw         vela-system autodetects.core.oam.dev                raw allow users to specify raw K8s object in properties     \ntask        vela-system jobs.batch                              Describes jobs that run code or a script to completion.     \nwebservice  vela-system deployments.apps                        Describes long-running, scalable, containerized services    \n                                                                that have a stable network endpoint to receive external     \n                                                                network traffic from customers.                             \nworker      vela-system deployments.apps                        Describes long-running, scalable, containerized services    \n                                                                that running at backend. They do NOT have network endpoint  \n                                                                to receive external network traffic.   \n")),(0,i.kt)("p",null,"\u4f60\u6240\u770b\u5230\uff0c\u5728 vela-system \u547d\u4ee4\u7a7a\u95f4\u4e0b\u7684 webservice\u3001task \u548c worker \u7b49\u7ec4\u4ef6\u7c7b\u578b\uff0c\u90fd\u662f\u901a\u8fc7 CUE \u6a21\u7248\u6765\u5185\u7f6e\u7684\u3002"),(0,i.kt)("p",null,"KubeVela \u5185\u7f6e\u7684\u8fd9\u51e0\u79cd\u5f00\u7bb1\u5373\u7528\u7684 CUE \u7ec4\u4ef6\uff0c\u6db5\u76d6\u4e86\u4e3b\u6d41\u7684\u5fae\u670d\u52a1\u573a\u666f\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u4ee5 Web Service \u4f5c\u4e3a\u4f8b\u5b50\u8fdb\u884c\u8bb2\u89e3\uff0c\u7f16\u5199\u5982\u4e0b\u7684 YAML \u6587\u4ef6\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: website\nspec:\n  components:\n    - name: frontend\n      type: webservice\n      properties:\n        image: oamdev/testapp:v1\n        cmd: ["node", "server.js"]\n        port: 8080\n        cpu: "0.1"\n        env:\n          - name: FOO\n            value: bar\n          - name: FOO\n            valueFrom:\n              secretKeyRef:\n                name: bar\n                key: bar\n')),(0,i.kt)("p",null,"\u90e8\u7f72\u5230\u8fd0\u884c\u65f6\u96c6\u7fa4\uff0c\u5e76\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"vela ls")," \u67e5\u770b\u662f\u5426\u6210\u529f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ kubectl apply -f web-service.yaml \napplication.core.oam.dev/website configured\n\n$ vela ls\nAPP                     COMPONENT       TYPE        TRAITS              PHASE           HEALTHY     STATUS                                  CREATED-TIME                 \nwebsite                 frontend        webservice                      rendering       healthy                                             2021-07-15 11:24:52 +0800 CST\n")),(0,i.kt)("p",null,"\u6700\u540e\uff0c\u5728\u4f60\u60f3\u8981\u901a\u8fc7\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u6765\u6ee1\u8db3\u9700\u6c42\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u81ea\u5df1\u67e5\u770b\u7ba1\u7406\u5458\u624b\u518c\u91cc\u7684",(0,i.kt)("a",{parentName:"p",href:"../../platform-engineers/components/custom-component"},"\u81ea\u5b9a\u4e49\u7ec4\u4ef6"),"\u8fdb\u884c\u5f00\u53d1\uff0c\u6216\u8005\u8bf7\u6c42\u4f60\u4eec\u7684\u5e73\u53f0\u7ba1\u7406\u5458\u8fdb\u884c\u5f00\u53d1\u3002"),(0,i.kt)("h3",{id:"\u9644\u5f55\uff1aweb-service-\u914d\u7f6e\u9879"},"\u9644\u5f55\uff1aWeb Service \u914d\u7f6e\u9879"),(0,i.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 vela show <\u7ec4\u4ef6\u540d\u79f0> \u7684\u547d\u4ee4\u6765\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\uff0c\u5bf9\u6240\u6709\u7ec4\u4ef6\u9002\u7528\u3002\u6bd4\u5982 Web Service \u914d\u7f6e\u9879\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'# Properties\n+------------------+-------------------------------------------------------------------------------------------+-----------------------------------+----------+---------+\n|       NAME       |                                        DESCRIPTION                                        |               TYPE                | REQUIRED | DEFAULT |\n+------------------+-------------------------------------------------------------------------------------------+-----------------------------------+----------+---------+\n| cmd              | Commands to run in the container                                                          | []string                          | false    |         |\n| env              | Define arguments by using environment variables                                           | [[]env](#env)                     | false    |         |\n| image            | Which image would you like to use for your service                                        | string                            | true     |         |\n| port             | Which port do you want customer traffic sent to                                           | int                               | true     |      80 |\n| imagePullPolicy  | Specify image pull policy for your service                                                | string                            | false    |         |\n| cpu              | Number of CPU units for the service, like `0.5` (0.5 CPU core), `1` (1 CPU core)          | string                            | false    |         |\n| memory           | Specifies the attributes of the memory resource required for the container.               | string                            | false    |         |\n| volumes          | Declare volumes and volumeMounts                                                          | [[]volumes](#volumes)             | false    |         |\n| livenessProbe    | Instructions for assessing whether the container is alive.                                | [livenessProbe](#livenessProbe)   | false    |         |\n| readinessProbe   | Instructions for assessing whether the container is in a suitable state to serve traffic. | [readinessProbe](#readinessProbe) | false    |         |\n| imagePullSecrets | Specify image pull secrets for your service                                               | []string                          | false    |         |\n+------------------+-------------------------------------------------------------------------------------------+-----------------------------------+----------+---------+\n\n\n########### readinessProbe\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n|        NAME         |                                             DESCRIPTION                                              |          TYPE           | REQUIRED | DEFAULT |\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n| exec                | Instructions for assessing container health by executing a command. Either this attribute or the     | [exec](#exec)           | false    |         |\n|                     | httpGet attribute or the tcpSocket attribute MUST be specified. This attribute is mutually exclusive |                         |          |         |\n|                     | with both the httpGet attribute and the tcpSocket attribute.                                         |                         |          |         |\n| httpGet             | Instructions for assessing container health by executing an HTTP GET request. Either this attribute  | [httpGet](#httpGet)     | false    |         |\n|                     | or the exec attribute or the tcpSocket attribute MUST be specified. This attribute is mutually       |                         |          |         |\n|                     | exclusive with both the exec attribute and the tcpSocket attribute.                                  |                         |          |         |\n| tcpSocket           | Instructions for assessing container health by probing a TCP socket. Either this attribute or the    | [tcpSocket](#tcpSocket) | false    |         |\n|                     | exec attribute or the httpGet attribute MUST be specified. This attribute is mutually exclusive with |                         |          |         |\n|                     | both the exec attribute and the httpGet attribute.                                                   |                         |          |         |\n| initialDelaySeconds | Number of seconds after the container is started before the first probe is initiated.                | int                     | true     |       0 |\n| periodSeconds       | How often, in seconds, to execute the probe.                                                         | int                     | true     |      10 |\n| timeoutSeconds      | Number of seconds after which the probe times out.                                                   | int                     | true     |       1 |\n| successThreshold    | Minimum consecutive successes for the probe to be considered successful after having failed.         | int                     | true     |       1 |\n| failureThreshold    | Number of consecutive failures required to determine the container is not alive (liveness probe) or  | int                     | true     |       3 |\n|                     | not ready (readiness probe).                                                                         |                         |          |         |\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n\n\n############### tcpSocket\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n| NAME |                                      DESCRIPTION                                      | TYPE | REQUIRED | DEFAULT |\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n| port | The TCP socket within the container that should be probed to assess container health. | int  | true     |         |\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n\n\n############# httpGet\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n|    NAME     |                                      DESCRIPTION                                      |             TYPE              | REQUIRED | DEFAULT |\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n| path        | The endpoint, relative to the port, to which the HTTP GET request should be directed. | string                        | true     |         |\n| port        | The TCP socket within the container to which the HTTP GET request should be directed. | int                           | true     |         |\n| httpHeaders |                                                                                       | [[]httpHeaders](#httpHeaders) | false    |         |\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n\n\n############## httpHeaders\n+-------+-------------+--------+----------+---------+\n| NAME  | DESCRIPTION |  TYPE  | REQUIRED | DEFAULT |\n+-------+-------------+--------+----------+---------+\n| name  |             | string | true     |         |\n| value |             | string | true     |         |\n+-------+-------------+--------+----------+---------+\n\n\n############ exec\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n|  NAME   |                                             DESCRIPTION                                              |   TYPE   | REQUIRED | DEFAULT |\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n| command | A command to be executed inside the container to assess its health. Each space delimited token of    | []string | true     |         |\n|         | the command is a separate array element. Commands exiting 0 are considered to be successful probes,  |          |          |         |\n|         | whilst all other exit codes are considered failures.                                                 |          |          |         |\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n\n\n###### livenessProbe\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n|        NAME         |                                             DESCRIPTION                                              |          TYPE           | REQUIRED | DEFAULT |\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n| exec                | Instructions for assessing container health by executing a command. Either this attribute or the     | [exec](#exec)           | false    |         |\n|                     | httpGet attribute or the tcpSocket attribute MUST be specified. This attribute is mutually exclusive |                         |          |         |\n|                     | with both the httpGet attribute and the tcpSocket attribute.                                         |                         |          |         |\n| httpGet             | Instructions for assessing container health by executing an HTTP GET request. Either this attribute  | [httpGet](#httpGet)     | false    |         |\n|                     | or the exec attribute or the tcpSocket attribute MUST be specified. This attribute is mutually       |                         |          |         |\n|                     | exclusive with both the exec attribute and the tcpSocket attribute.                                  |                         |          |         |\n| tcpSocket           | Instructions for assessing container health by probing a TCP socket. Either this attribute or the    | [tcpSocket](#tcpSocket) | false    |         |\n|                     | exec attribute or the httpGet attribute MUST be specified. This attribute is mutually exclusive with |                         |          |         |\n|                     | both the exec attribute and the httpGet attribute.                                                   |                         |          |         |\n| initialDelaySeconds | Number of seconds after the container is started before the first probe is initiated.                | int                     | true     |       0 |\n| periodSeconds       | How often, in seconds, to execute the probe.                                                         | int                     | true     |      10 |\n| timeoutSeconds      | Number of seconds after which the probe times out.                                                   | int                     | true     |       1 |\n| successThreshold    | Minimum consecutive successes for the probe to be considered successful after having failed.         | int                     | true     |       1 |\n| failureThreshold    | Number of consecutive failures required to determine the container is not alive (liveness probe) or  | int                     | true     |       3 |\n|                     | not ready (readiness probe).                                                                         |                         |          |         |\n+---------------------+------------------------------------------------------------------------------------------------------+-------------------------+----------+---------+\n\n\n########## tcpSocket\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n| NAME |                                      DESCRIPTION                                      | TYPE | REQUIRED | DEFAULT |\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n| port | The TCP socket within the container that should be probed to assess container health. | int  | true     |         |\n+------+---------------------------------------------------------------------------------------+------+----------+---------+\n\n\n######## httpGet\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n|    NAME     |                                      DESCRIPTION                                      |             TYPE              | REQUIRED | DEFAULT |\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n| path        | The endpoint, relative to the port, to which the HTTP GET request should be directed. | string                        | true     |         |\n| port        | The TCP socket within the container to which the HTTP GET request should be directed. | int                           | true     |         |\n| httpHeaders |                                                                                       | [[]httpHeaders](#httpHeaders) | false    |         |\n+-------------+---------------------------------------------------------------------------------------+-------------------------------+----------+---------+\n\n\n######### httpHeaders\n+-------+-------------+--------+----------+---------+\n| NAME  | DESCRIPTION |  TYPE  | REQUIRED | DEFAULT |\n+-------+-------------+--------+----------+---------+\n| name  |             | string | true     |         |\n| value |             | string | true     |         |\n+-------+-------------+--------+----------+---------+\n\n\n####### exec\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n|  NAME   |                                             DESCRIPTION                                              |   TYPE   | REQUIRED | DEFAULT |\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n| command | A command to be executed inside the container to assess its health. Each space delimited token of    | []string | true     |         |\n|         | the command is a separate array element. Commands exiting 0 are considered to be successful probes,  |          |          |         |\n|         | whilst all other exit codes are considered failures.                                                 |          |          |         |\n+---------+------------------------------------------------------------------------------------------------------+----------+----------+---------+\n\n\n##### volumes\n+-----------+---------------------------------------------------------------------+--------+----------+---------+\n|   NAME    |                             DESCRIPTION                             |  TYPE  | REQUIRED | DEFAULT |\n+-----------+---------------------------------------------------------------------+--------+----------+---------+\n| name      |                                                                     | string | true     |         |\n| mountPath |                                                                     | string | true     |         |\n| type      | Specify volume type, options: "pvc","configMap","secret","emptyDir" | string | true     |         |\n+-----------+---------------------------------------------------------------------+--------+----------+---------+\n\n\n## env\n+-----------+-----------------------------------------------------------+-------------------------+----------+---------+\n|   NAME    |                        DESCRIPTION                        |          TYPE           | REQUIRED | DEFAULT |\n+-----------+-----------------------------------------------------------+-------------------------+----------+---------+\n| name      | Environment variable name                                 | string                  | true     |         |\n| value     | The value of the environment variable                     | string                  | false    |         |\n| valueFrom | Specifies a source the value of this var should come from | [valueFrom](#valueFrom) | false    |         |\n+-----------+-----------------------------------------------------------+-------------------------+----------+---------+\n\n\n### valueFrom\n+--------------+--------------------------------------------------+-------------------------------+----------+---------+\n|     NAME     |                   DESCRIPTION                    |             TYPE              | REQUIRED | DEFAULT |\n+--------------+--------------------------------------------------+-------------------------------+----------+---------+\n| secretKeyRef | Selects a key of a secret in the pod\'s namespace | [secretKeyRef](#secretKeyRef) | true     |         |\n+--------------+--------------------------------------------------+-------------------------------+----------+---------+\n\n\n#### secretKeyRef\n+------+------------------------------------------------------------------+--------+----------+---------+\n| NAME |                           DESCRIPTION                            |  TYPE  | REQUIRED | DEFAULT |\n+------+------------------------------------------------------------------+--------+----------+---------+\n| name | The name of the secret in the pod\'s namespace to select from     | string | true     |         |\n| key  | The key of the secret to select from. Must be a valid secret key | string | true     |         |\n+------+------------------------------------------------------------------+--------+----------+---------+\n')))}l.isMDXComponent=!0}}]);