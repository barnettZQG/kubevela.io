(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[50],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(t),m=o,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return t?r.createElement(f,l(l({ref:n},u),{},{components:t})):r.createElement(f,l({ref:n},u))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=p;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var c=2;c<a;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},5541:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return l},metadata:function(){return i},toc:function(){return s},default:function(){return u}});var r=t(2122),o=t(9756),a=(t(7294),t(3905)),l={title:"Integrated Cloud Services"},i={unversionedId:"end-user/cloud-services",id:"end-user/cloud-services",isDocsHomePage:!1,title:"Integrated Cloud Services",description:"Cloud-oriented development is now becoming the norm, there is an urgent need to integrate cloud resources from different sources and types. Whether it is the most basic object storage, cloud database, or load balancing, it is all faced with the challenges of hybrid cloud, multi-cloud and other complex environments, and KubeVela is perfect for the needs.",source:"@site/docs/end-user/cloud-services.md",sourceDirName:"end-user",slug:"/end-user/cloud-services",permalink:"/docs/next/end-user/cloud-services",editUrl:"https://github.com/oam-dev/kubevela/edit/master/docs/en/end-user/cloud-services.md",version:"current",lastUpdatedBy:"Tianxin Dong",lastUpdatedAt:1630569542,formattedLastUpdatedAt:"9/2/2021",frontMatter:{title:"Integrated Cloud Services"}},s=[{value:"Check the cloud resources in KubeVela",id:"check-the-cloud-resources-in-kubevela",children:[]},{value:"Activate cloud resources",id:"activate-cloud-resources",children:[{value:"Apply cloud resource",id:"apply-cloud-resource",children:[]},{value:"Bind cloud resources to components",id:"bind-cloud-resources-to-components",children:[]}]},{value:"Custom cloud resources",id:"custom-cloud-resources",children:[]},{value:"Next",id:"next",children:[]}],c={toc:s};function u(e){var n=e.components,t=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Cloud-oriented development is now becoming the norm, there is an urgent need to integrate cloud resources from different sources and types. Whether it is the most basic object storage, cloud database, or load balancing, it is all faced with the challenges of hybrid cloud, multi-cloud and other complex environments, and KubeVela is perfect for the needs."),(0,a.kt)("p",null,"KubeVela efficiently and securely integrates different types of cloud resources through resource binding capabilities in cloud resource Components and Traits. At present, you can directly use the default components of AliCloud Kubernetes(ACK), AliCloud Object Storage Service (OSS) and AliCloud Relational Database Service (RDS). At the same time, more new cloud resources will gradually become the default option under the support of the community in the future, so that you can use cloud resources of various manufacturers in a standardized and unified way."),(0,a.kt)("h2",{id:"check-the-cloud-resources-in-kubevela"},"Check the cloud resources in KubeVela"),(0,a.kt)("p",null,"We can use ",(0,a.kt)("a",{parentName:"p",href:"/docs/next/getting-started/quick-install#3-Get-KubeVela-CLI"},"KubeVela CLI")," to check the available cloud resources in the current cluster:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ vela components\nNAME        NAMESPACE   WORKLOAD                                DESCRIPTION                                                            \nalibaba-ack vela-system configurations.terraform.core.oam.dev   Terraform configuration for Alibaba Cloud ACK cluster       \nalibaba-oss vela-system configurations.terraform.core.oam.dev   Terraform configuration for Alibaba Cloud OSS object        \nalibaba-rds vela-system configurations.terraform.core.oam.dev   Terraform configuration for Alibaba Cloud RDS object        \n")),(0,a.kt)("p",null,"The integration process of cloud resources in KubeVela is as follows:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Get required secret or token from cloud service providers."),(0,a.kt)("li",{parentName:"ul"},"Save the authentication information to the global configuration of Terraform and verify it."),(0,a.kt)("li",{parentName:"ul"},"KubeVela will authenticate with the Terraform controller and automatically pull up cloud resources.")),(0,a.kt)("h2",{id:"activate-cloud-resources"},"Activate cloud resources"),(0,a.kt)("p",null,"Prepare the token of the cloud resources and use ",(0,a.kt)("inlineCode",{parentName:"p"},"vela addon enable")," to configure the authentication:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vela addon enable terraform/provider-alicloud --ALICLOUD_ACCESS_KEY_ID=<your key ID> -ALICLOUD_SECRET_ACCESS_KEY=<your key secret>\n")),(0,a.kt)("p",null,"Take the example of AliCloud relational database (RDS) as an example to explain."),(0,a.kt)("h3",{id:"apply-cloud-resource"},"Apply cloud resource"),(0,a.kt)("p",null,"Apply the ",(0,a.kt)("inlineCode",{parentName:"p"},"Application"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cat <<EOF | kubectl apply -f -\napiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: webapp\nspec:\n  components:\n    - name: rds-server\n      type: webservice\n      properties:\n        image: zzxwill/flask-web-application:v0.3.1-crossplane\n        ports: 80\n    - name: sample-db\n      type: alibaba-rds\n      properties:\n        instance_name: sample-db\n        account_name: oamtest\n        password: U34rfwefwefffaked\n        writeConnectionSecretToRef:\n          name: db-conn\nEOF\n")),(0,a.kt)("p",null,"We use a ",(0,a.kt)("inlineCode",{parentName:"p"},"webservice")," component as the server for RDS, while the ",(0,a.kt)("inlineCode",{parentName:"p"},"alibaba-rds")," component named ",(0,a.kt)("inlineCode",{parentName:"p"},"sample-db")," takes responsibility for pulling cloud resources, and the database information is written to ",(0,a.kt)("inlineCode",{parentName:"p"},"db-conn"),"."),(0,a.kt)("p",null,"Generally, it takes a lot of time to pull up cloud resources. For example, RDS here takes about 15 minutes. We can see its whole process from rendering, health check to running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ vela ls                  \nAPP                     COMPONENT       TYPE        TRAITS              PHASE   HEALTHY STATUS                                          CREATED-TIME \nwebapp                  rds-server      webservice  service-binding     rendering                   2021-08-30 20:04:03 +0800 CST\n\u2514\u2500                  sample-db       alibaba-rds                     rendering                   2021-08-30 20:04:03 +0800 CST\n\nwebapp                  rds-server      webservice  service-binding     healthChecking  healthy                                             2021-08-30 20:04:03 +0800 CST\n\u2514\u2500                  sample-db       alibaba-rds                     healthChecking  unhealthy   Cloud resources are being provisioned.  2021-08-30 20:04:03 +0800 CST\n\nwebapp                  rds-server      webservice  service-binding     running healthy                                                 2021-08-30 20:04:03 +0800 CST\n\u2514\u2500                  sample-db       alibaba-rds                     running healthy Cloud resources are deployed and ready to use.  2021-08-30 20:04:03 +0800 CST\n")),(0,a.kt)("h3",{id:"bind-cloud-resources-to-components"},"Bind cloud resources to components"),(0,a.kt)("p",null,"Use Traits ",(0,a.kt)("inlineCode",{parentName:"p"},"service-binding")," and update the YAML file, the ",(0,a.kt)("inlineCode",{parentName:"p"},"db-conn")," will send secret and token to the ",(0,a.kt)("inlineCode",{parentName:"p"},"rds-server")," component:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cat <<EOF | kubectl apply -f -\napiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: webapp\nspec:\n  components:\n    - name: rds-server\n      type: webservice\n      properties:\n        image: zzxwill/flask-web-application:v0.3.1-crossplane\n        ports: 80\n      traits:\n        - type: service-binding\n          properties:\n            envMappings:\n              # \u73af\u5883\u53d8\u91cf\u4e0e db-conn \u5bc6\u94a5\u5f62\u6210\u6620\u5c04\n              DB_PASSWORD:\n                secret: db-conn                             \n              endpoint:\n                secret: db-conn\n                key: DB_HOST          \n              username:\n                secret: db-conn\n                key: DB_USER\n    - name: sample-db\n      type: alibaba-rds\n      properties:\n        instance_name: sample-db\n        account_name: oamtest\n        password: U34rfwefwefffaked\n        writeConnectionSecretToRef:\n          name: db-conn\nEOF\n")),(0,a.kt)("p",null,"For more cloud resources usages, please check built-in cloud resources in platform-engineers doc."),(0,a.kt)("h2",{id:"custom-cloud-resources"},"Custom cloud resources"),(0,a.kt)("p",null,"If the out-of-the-box cloud resources don't cover your needs, you can still use the flexible ",(0,a.kt)("a",{parentName:"p",href:"../platform-engineers/components/component-terraform"},"Terraform component")," to build your own cloud resources."),(0,a.kt)("h2",{id:"next"},"Next"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./component-observability"},"Component Observability")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./component-dependency-parameter"},"Data Pass Between Components ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./multi-app-env-cluster"},"Multi-Cluster and Environment"))))}u.isMDXComponent=!0}}]);